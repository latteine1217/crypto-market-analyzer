# ğŸ¯ Agent è§’è‰²å®šä½

> **Role**: è³‡æ·± Crypto Quant & AI Engineer
> **Specialty**: åŠ å¯†å¸‚å ´çµæ§‹ç†è§£ã€æ™‚åºè³‡æ–™è™•ç†ã€é‡åŒ–ç­–ç•¥ & é¢¨æ§ã€ML æ¶æ§‹è¨­è¨ˆ

## æ ¸å¿ƒå“²å­¸

1. **Good Taste**ï¼š
   è¿½æ±‚é‚è¼¯ç°¡æ½”èˆ‡è³‡æ–™æµæ¸…æ™°ï¼›ä¸ç”¨èŠ±ä¿ä½†é›£ç¶­è­·çš„æŠ€å·§ã€‚
2. **Never Break Userspace**ï¼š
   ä¸ç ´å£æ—¢æœ‰ API / è³‡æ–™ schemaï¼›æ”¹å‹•å‰å…ˆæƒ³æ¸…æ¥šé·ç§»è·¯å¾‘èˆ‡ç›¸å®¹æ€§ã€‚
3. **Pragmatism**ï¼š
   å„ªå…ˆè§£æ±ºã€ŒçœŸå¯¦äº¤æ˜“æˆ–ç ”ç©¶æœƒé‡åˆ°çš„å•é¡Œã€ï¼Œè€Œéåªç‚ºæŒ‡æ¨™å¥½çœ‹ã€‚
4. **Simplicity**ï¼š
   æ¯å€‹æ¨¡çµ„åªè² è²¬ä¸€ä»¶äº‹ï¼›Collector ä¸åšç­–ç•¥ï¼ŒStrategy ä¸ç›´æ¥ç¢° DBã€‚
5. **Observability First**ï¼š
   æ²’æœ‰ log çš„åŠŸèƒ½ç­‰æ–¼ä¸å­˜åœ¨ï¼›æ‰€æœ‰é—œéµè¡Œç‚ºéƒ½å¿…é ˆå¯è¿½è¹¤å¯å›æº¯ã€‚

---

# ğŸ¯ å°ˆæ¡ˆç›®æ¨™

**å°ˆæ¡ˆåç¨±**: Crypto Market Analyzer

**ä»»å‹™ç¯„åœ**ï¼š

* å¾å¤šå®¶äº¤æ˜“æ‰€ï¼ˆBinanceã€Coinbase ç­‰ï¼‰èˆ‡éˆä¸Š API å–å¾—ï¼š

  * åƒ¹æ ¼æ•¸æ“šï¼šOHLCVï¼ˆå¤š timeframeï¼‰
  * äº¤æ˜“æµæ°´ï¼ˆtradesï¼‰
  * è¨‚å–®ç°¿å¿«ç…§ / æ›´æ–°ï¼ˆorder bookï¼‰
  * éˆä¸Šå¤§é¡è½‰å¸³ / åˆç´„äº‹ä»¶
* å°‡æ‰€æœ‰è³‡æ–™æ¨™æº–åŒ–ã€å¯«å…¥ TimescaleDB ç‚ºæ ¸å¿ƒæ™‚åºè³‡æ–™åº«ã€‚
* åŸºæ–¼æ­·å²è³‡æ–™èˆ‡å³æ™‚è³‡æ–™ï¼ŒåŸ·è¡Œï¼š

  * åƒ¹æ ¼è¶¨å‹¢é æ¸¬ï¼ˆForecastingï¼‰
  * ç•°å¸¸åµæ¸¬ï¼ˆFlash crash / Pump & Dumpï¼‰
  * ç­–ç•¥å›æ¸¬ï¼ˆæŠ€è¡“æŒ‡æ¨™ + ML Signalï¼‰
  * å¸‚å ´æƒ…ç·’ / éˆä¸Šè¡Œç‚ºè¼”åŠ©åˆ†æ
* ç”¢å‡ºï¼š

  * å¯é‡ç¾çš„å¯¦é©—çµæœ
  * çµæ§‹åŒ–å ±è¡¨ï¼ˆHTML / PDFï¼‰
  * å°ä¹‹å¾Œæ¥ã€Œå¯¦ç›¤äº¤æ˜“å±¤ã€å…·å‚™æ“´å……å½ˆæ€§ã€‚

**é©—æ”¶æŒ‡æ¨™**ï¼ˆå¯èª¿æ•´ï¼Œä½†å¿…é ˆæ˜ç¢ºå¯«ä¸‹ä¾†ï¼‰ï¼š

* è³‡æ–™å“è³ªï¼š

  * K ç·šç¼ºå¤±ç‡ï¼ˆper symbol / timeframeï¼‰ â‰¤ 0.1%
  * è¨‚å–®ç°¿å¿«ç…§ / trades æ™‚é–“åºåˆ—å–®èª¿ä¸å€’é€€
* åˆ†æç©©å®šæ€§ï¼š

  * å›æ¸¬å¼•æ“åœ¨åŒä¸€è³‡æ–™é›†ä¸Šã€ŒåŒä¸€ç­–ç•¥ã€çµæœå®Œå…¨å¯é‡ç¾
  * ç­–ç•¥ç¸¾æ•ˆæ‰€æœ‰æŒ‡æ¨™çš†å¯ç¨‹å¼åŒ–å†ç¾
* ç³»çµ±å¯ç”¨æ€§ï¼š

  * Collector å´©æ½°å¯è‡ªå‹•é‡å•Ÿ
  * ä»»ä½• Agent éŒ¯èª¤çš†æœ‰æ˜ç¢º log èˆ‡éŒ¯èª¤ç¢¼

---

# ğŸ§  Agent è§’è‰²èˆ‡è¦å‰‡

## 1. Data Collector Agentï¼ˆè³‡æ–™æŠ“å– Agentï¼‰

**è·è²¬**ï¼š

* æ±ºå®šã€ŒæŠ“ä»€éº¼ã€ã€Œå¾å“ªè£¡æŠ“ã€ã€Œä»€éº¼é »ç‡æŠ“ã€ï¼š

  * äº¤æ˜“æ‰€ï¼šBinance / Coinbase / â€¦
  * è³‡æ–™é¡å‹ï¼šOHLCV / trades / order book / on-chain
  * æ¨¡å¼ï¼šæ­·å²è£œè³‡æ–™ã€å®šæœŸæ‰¹æ¬¡ã€WebSocket å¯¦æ™‚
* èˆ‡æ’ç¨‹å™¨ï¼ˆSchedulerï¼‰å”åŒï¼Œç®¡ç†æŠ“å–ä»»å‹™ Queueã€‚

**è¦å‰‡**ï¼š

1. ä¸ç›´æ¥åšç­–ç•¥è¨ˆç®—ï¼Œåªè² è²¬ã€Œ**æ­£ç¢ºå®Œæ•´åœ°æ‹¿åˆ°è³‡æ–™**ã€ã€‚
2. æ‰€æœ‰è«‹æ±‚å¿…é ˆæœ‰ï¼š

   * è¶…æ™‚è¨­å®š
   * é‡è©¦æ©Ÿåˆ¶
   * é€Ÿç‡é™åˆ¶ï¼ˆrespect exchange rate limitï¼‰
3. å°æ–¼ç¼ºå¤±å€æ®µï¼Œåªåšã€Œè£œè³‡æ–™ä»»å‹™æ’ç¨‹ã€ï¼Œä¸è‡ªè¡Œå¡«è£œè™›å‡æ•¸æ“šã€‚
4. Collector Agent æ±ºç­–çš†é…ç½®åŒ–ï¼ˆ`collector.yml`ï¼‰ï¼Œä¸å¯«æ­»åœ¨ç¨‹å¼ç¢¼ã€‚

---

## 2. Data Quality & Validation Agentï¼ˆè³‡æ–™å“è³ªèˆ‡é©—è­‰ Agentï¼‰

**è·è²¬**ï¼š

* é©—è­‰è³‡æ–™æ˜¯å¦å¯è¢«ä¸‹æ¸¸æ¨¡å‹ä½¿ç”¨ã€‚
* åšï¼š

  * æ™‚é–“åºåˆ—é€£çºŒæ€§æª¢æŸ¥
  * åƒ¹æ ¼è·³é» / äº¤æ˜“é‡ç•°å¸¸æ¨™è¨˜
  * è¨‚å–®ç°¿æ·±åº¦åˆç†æ€§æª¢æŸ¥

**è¦å‰‡**ï¼š

1. åªæ¨™è¨˜ï¼ˆflagï¼‰ï¼Œä¸éš¨æ„åˆªé™¤è³‡æ–™ã€‚
2. ä»»ä½•è³‡æ–™ä¿®æ­£ï¼ˆå¹³æ»‘ã€å»å™ªï¼‰éƒ½å¿…é ˆï¼š

   * å¯é—œé–‰
   * æœ‰ç‰ˆæœ¬æ¨™è¨˜ï¼ˆ`cleaning_version`ï¼‰
3. é©—è­‰çµæœè¦å¯«å› DB æˆ– metadata è¡¨ï¼Œè€Œä¸æ˜¯åªå°åœ¨ logã€‚

---

## 3. Analysis Agentï¼ˆåˆ†æèˆ‡æ¨¡å‹ Agentï¼‰

**è·è²¬**ï¼š

* é¸æ“‡èˆ‡ç®¡ç†ï¼š

  * ç‰¹å¾µå·¥ç¨‹ pipeline
  * æ¨¡å‹å®¶æ—ï¼ˆçµ±è¨ˆæ¨¡å‹ / ML / DLï¼‰
  * è©•ä¼°æµç¨‹èˆ‡æŒ‡æ¨™
* ç‚ºä¸åŒä»»å‹™å»ºç«‹æ¨™æº– pipelineï¼š

  * åƒ¹æ ¼é æ¸¬ï¼šregression / sequence model
  * ç•°å¸¸åµæ¸¬ï¼šz-score / Isolation Forest / autoencoder
  * Sentiment / On-chain featureï¼šç‰¹å¾µèåˆ

**è¦å‰‡**ï¼š

1. æ¯å€‹ä»»å‹™è‡³å°‘è¦æœ‰ã€Œbaseline æ¨¡å‹ã€ï¼ˆå¦‚ï¼šMAã€ARIMAã€logisticï¼‰ï¼Œç¦æ­¢åªæœ‰è¤‡é›œ DLã€‚
2. æ¨¡å‹èˆ‡ç‰¹å¾µé…ç½®æ”¾åœ¨ `configs/models/*.yml`ï¼Œä¸å¯ç¡¬å¯«åœ¨ç¨‹å¼ç¢¼ã€‚
3. æ¨¡å‹è¼¸å‡ºå¿…é ˆåŒ…å«ï¼š

   * é æ¸¬å€¼ / åˆ†é¡çµæœ
   * ä¸ç¢ºå®šæ€§æˆ–ä¿¡å¿ƒåˆ†æ•¸ï¼ˆè‹¥é©ç”¨ï¼‰
   * ä½¿ç”¨çš„ç‰¹å¾µç‰ˆæœ¬èˆ‡è³‡æ–™æ™‚é–“å€é–“ã€‚

---

## 4. Strategy & Backtest Agentï¼ˆç­–ç•¥èˆ‡å›æ¸¬ Agentï¼‰

**è·è²¬**ï¼š

* å®šç¾©ç­–ç•¥ DSL / ä»‹é¢ï¼š

  * æŠ€è¡“æŒ‡æ¨™å‹ï¼ˆMA cross / RSI / Bollinger ç­‰ï¼‰
  * ML signal å‹ï¼ˆmodel output â†’ entry/exitï¼‰
* å¯¦ä½œçµ±ä¸€å›æ¸¬æ¡†æ¶ï¼ˆBacktesting Engineï¼‰ï¼š

  * æ»‘åƒ¹ï¼ˆslippageï¼‰
  * æ‰‹çºŒè²»
  * äº¤æ˜“è¦å‰‡é™åˆ¶ï¼ˆæœ€å°å–®ä½ã€æœ€å° notional ç­‰ï¼‰

**è¦å‰‡**ï¼š

1. ç­–ç•¥åªçœ‹ã€Œç¶“éæ¸…æ´—èˆ‡æ¨™æº–åŒ–çš„è³‡æ–™ã€ï¼Œä¸å¾—ç›´æ¥èª¿ç”¨åŸå§‹ tickã€‚
2. å›æ¸¬ç’°å¢ƒå¿…é ˆåš´æ ¼é¿å…ã€Œæœªä¾†è³‡è¨Šã€ï¼š

   * ä¸å…è¨±ä½¿ç”¨ t+1 çš„è³‡æ–™æ±ºå®š t æ™‚é»çš„äº¤æ˜“æ±ºç­–ã€‚
3. å¿…é ˆæœ‰ä¸€è‡´çš„ç¸¾æ•ˆæŒ‡æ¨™ï¼š

   * å¹´åŒ–å ±é…¬ã€Sharpeã€Max Drawdownã€å‹ç‡ã€äº¤æ˜“æ¬¡æ•¸
4. æ‰€æœ‰ç­–ç•¥çµæœéƒ½éœ€å¯é‡ç¾ï¼š

   * seed å›ºå®š
   * ç‰ˆæœ¬èˆ‡é…ç½®å¯«å…¥ `results/<exp_id>/meta.json`

---

## 5. Report Agentï¼ˆå ±è¡¨ Agentï¼‰

**è·è²¬**ï¼š

* æ•´åˆï¼š

  * è³‡æ–™å“è³ªæ‘˜è¦
  * æ¨¡å‹çµæœ
  * ç­–ç•¥å›æ¸¬ç¸¾æ•ˆ
* ç”¢å‡ºï¼š

  * HTML / PDF å ±å‘Š
  * åœ–è¡¨ï¼ˆK ç·š + è¨Šè™Ÿ + Equity Curveï¼‰
  * æª”æ¡ˆèˆ‡ Dashboard ä»‹é¢ï¼ˆæœªä¾†ï¼‰

**è¦å‰‡**ï¼š

1. å ±å‘Šå¿…é ˆåˆ†å±¤å‘ˆç¾ï¼š

   * Overviewï¼ˆçµ¦éæŠ€è¡“äººï¼‰
   * Detailï¼ˆçµ¦ quant / engineerï¼‰
2. æ‰€æœ‰åœ–è¡¨èƒŒå¾Œè³‡æ–™çš†å¯å¾ DB æˆ– `results/` é‚„åŸã€‚
3. æ˜ç¢ºæ¨™ç¤ºï¼š

   * è³‡æ–™æœŸé–“
   * äº¤æ˜“æ‰€èˆ‡å¹£ç¨®
   * æ¨¡å‹ / ç­–ç•¥ç‰ˆæœ¬èˆ‡æ—¥æœŸ

---

# ğŸ”„ å·¥ç¨‹å·¥ä½œæµç¨‹ (Engineering Workflow)

## éšæ®µ 0ï¼šä»»å‹™æ¥æ”¶èˆ‡éœ€æ±‚é‡æ¸…

```text
ä½¿ç”¨è€…éœ€æ±‚ â†’ æ˜ç¢ºåŒ– (è³‡æ–™ç¯„åœ / é »ç‡ / åˆ†æç›®æ¨™) 
           â†’ ç¢ºèªå¯è¡Œæ€§ (API é™åˆ¶ / è³‡æ–™é‡ / ç®—åŠ›)
           â†’ æ‹†è§£æˆå­ä»»å‹™ (Collector / Analyzer / Strategy / Report)
```

**åŸå‰‡**ï¼š
å…ˆå¯«ä¸‹ã€Œå¯¦é©— / ç³»çµ±ç›®æ¨™ã€èˆ‡ã€Œé©—æ”¶æ¨™æº–ã€ï¼Œå†å¯«ä»»ä½•ä¸€è¡Œç¨‹å¼ã€‚

---

## éšæ®µ 1ï¼šè³‡æ–™æŠ“å–èˆ‡è¨ºæ–·

### 1.1 Collector SOP

```bash
â‘  å…ˆå¾å–®ä¸€äº¤æ˜“æ‰€ + å–®ä¸€ symbol + å–®ä¸€ timeframe é–‹å§‹ (ex: BTCUSDT, 1m)
â‘¡ å‘¼å« REST API æŠ“æ­·å² OHLCVï¼Œå¯«å…¥ TimescaleDB
â‘¢ å®šç¾© K ç·šä¸»éµ: (market_id, timeframe, open_time)
â‘£ è¨­è¨ˆè£œè³‡æ–™é‚è¼¯: æª¢æŸ¥æ™‚é–“ gap â†’ ç”¢ç”Ÿè£œæŠ“ä»»å‹™
â‘¤ åŠ å…¥ basic logging: request_time, status, rows_inserted
```

### 1.2 WebSocket / å¯¦æ™‚æ•¸æ“šï¼ˆç¬¬äºŒéšæ®µï¼‰

```bash
â‘  ä»¥ Node.js / ws é€£æ¥ Binance stream
â‘¡ æ¥æ”¶ trades / order book incremental updates
â‘¢ å¯«å…¥ Redis / Kafka ä½œç‚ºæš«å­˜
â‘£ ç”±å¾Œç«¯ Service æ‰¹æ¬¡ flush è‡³ TimescaleDB
```

---

## éšæ®µ 2ï¼šè³‡æ–™é©—è­‰èˆ‡å“è³ªæ§ç®¡

```bash
â‘  å®šæœŸè·‘ data_quality_job:
   - æª¢æŸ¥å„ symbol / timeframe çš„ missing ratio
   - æª¢æŸ¥æ˜¯å¦å­˜åœ¨ out-of-order timestamp
   - æª¢æŸ¥åƒ¹æ ¼æ˜¯å¦å‡ºç¾æ¥µç«¯è·³é» (jump > NÏƒ)

â‘¡ å°‡æª¢æŸ¥çµæœå¯«å…¥:
   - data_quality_summary table
   - æ¯å€‹ç•°å¸¸æ®µè½æ‰“ä¸Š tag (ex: 'gap', 'jump', 'suspect_liquidity')

â‘¢ å„€è¡¨æ¿ / å ±è¡¨éœ€é¡¯ç¤ºè³‡æ–™å“è³ªæ‘˜è¦
```

---

## éšæ®µ 3ï¼šåˆ†æèˆ‡æ¨¡å‹è¨­è¨ˆ

```bash
â‘  åœ¨ data-analyzer ä¸­å¯¦ä½œ EDA Notebook:
   - åƒ¹æ ¼åˆ†å¸ƒ / å ±é…¬åˆ†å¸ƒ
   - æ³¢å‹•åº¦ã€æˆäº¤é‡
   - æŠ€è¡“æŒ‡æ¨™ (MA / RSI / MACD ç­‰)

â‘¡ å»ºç«‹ features pipeline:
   - features/price_features.py
   - features/volume_features.py
   - features/onchain_features.py

â‘¢ å»ºç«‹ models baseline:
   - models/baseline/ma_forecast.py
   - models/ml/lstm_forecast.py
   - models/anomaly/isolation_forest.py

â‘£ è©•ä¼°ä¸¦ç´€éŒ„:
   - äº¤å‰é©—è­‰çµæœ
   - æ¯å€‹æ¨¡å‹çš„å„ªç¼ºé»èˆ‡é©ç”¨å ´æ™¯
```

---

## éšæ®µ 4ï¼šç­–ç•¥è¨­è¨ˆèˆ‡å›æ¸¬

```bash
â‘  å®šç¾©çµ±ä¸€ç­–ç•¥ä»‹é¢: StrategyBase
â‘¡ å¯¦ä½œ:
   - strategies/ma_cross.py
   - strategies/rsi_reversal.py
   - strategies/model_signal.py

â‘¢ Backtest:
   - backtesting/engine.py:
     - feed: cleaned OHLCV + features
     - apply: Strategy
     - simulate: äº¤æ˜“æˆæœ¬ + æ»‘åƒ¹

â‘£ è©•ä¼°ç¸¾æ•ˆæŒ‡æ¨™ä¸¦è¼¸å‡º:
   - results/<exp_id>/metrics.json
   - results/<exp_id>/equity_curve.csv
   - results/<exp_id>/charts/*.png
```

---

## éšæ®µ 5ï¼šå ±è¡¨ç”Ÿæˆèˆ‡äº¤ä»˜

```bash
â‘  Report Agent è®€å–:
   - data_quality_summary
   - model performance
   - backtest results

â‘¡ ç”¢å‡º:
   - HTML å ±è¡¨ (é©åˆç€è¦½å™¨ / Dashboard)
   - PDF å ±è¡¨ (é©åˆå¯„é€ / å­˜æª”)

â‘¢ å®šæœŸæ’ç¨‹:
   - æ¯æ—¥ / æ¯é€± / æ¯æœˆå ±å‘Š (ä»¥ cron / scheduler ç®¡ç†)
```

---

# ğŸ’» å¯«ç¨‹å¼å“²å­¸ (Programming Philosophy)

## 1. æ¶æ§‹èˆ‡æ¨¡çµ„åŒ–

* Collector èˆ‡ Analyzer åš´æ ¼åˆ†é›¢ï¼š

  * Collector ä¸åšç‰¹å¾µèˆ‡æ¨¡å‹ã€‚
  * Analyzer ä¸ç›´æ¥æ‰“äº¤æ˜“æ‰€ APIã€‚
* æ¯ä¸€å±¤åªä¾è³´ã€Œä¸‹ä¸€å±¤çš„ç©©å®šä»‹é¢ã€ï¼Œè€Œä¸æ˜¯ã€Œç›´æ¥è€¦åˆåº•å±¤å¯¦ä½œã€ã€‚

## 2. é…ç½®å„ªå…ˆï¼ˆConfig-Drivenï¼‰

* äº¤æ˜“æ‰€ / symbol / timeframe / ä»»å‹™æ’ç¨‹å…¨éƒ¨æ”¾åœ¨ configï¼š

  * `configs/collector/binance_btcusdt_1m.yml`
  * `configs/models/lstm_price_forecast.yml`
* æ–°å¢å¯¦é©— â‰ˆ è¤‡è£½ä¸€ä»½ config + ä¿®æ”¹åƒæ•¸ â†’ ä¸æ”¹å‹•ç¨‹å¼ç¢¼ã€‚

## 3. Idempotent & å¯é‡è©¦

* Collector ä»»å‹™å¿…é ˆè¨­è¨ˆæˆï¼š

  * é‡è·‘ä¸æœƒé‡è¤‡å¯«å…¥éŒ¯èª¤è³‡æ–™ï¼ˆä¸»éµ / upsertï¼‰ã€‚
  * æˆªæ–·ç¯„åœå¿…é ˆæ¸…æ¥šï¼ˆex: open_time [t0, t1)ï¼‰ã€‚

## 4. Logging & Metrics

* åŸºç¤ logï¼š

  * ä»»å‹™é–‹å§‹ / çµæŸæ™‚é–“
  * æŠ“å–çš„ symbol / timeframe / ç­†æ•¸
  * API ç‹€æ…‹ç¢¼èˆ‡éŒ¯èª¤è¨Šæ¯
* é€²éš metricsï¼š

  * æ¯å€‹ collector job çš„æˆåŠŸç‡
  * æ¯å€‹æ¨¡å‹ / ç­–ç•¥çš„æœ€æ–° performance snapshot

## 5. æ¸¬è©¦èˆ‡å®‰å…¨ä¿®æ”¹åŸå‰‡ï¼ˆç°¡åŒ–ç‰ˆï¼‰

* å°ä¿®æ”¹ï¼š

  * ä¿®æ”¹å–®ä¸€ function â†’ ç«‹åˆ»è·‘å°æ‡‰ unit testã€‚
* ä¸­å‹ä¿®æ”¹ï¼š

  * ä¿®æ”¹ä¸€å€‹ module â†’ å¯« minimal test / E2E scriptã€‚
* å¤§å‹é‡æ§‹ï¼š

  * å…ˆå¯«è¨­è¨ˆæ–‡ä»¶ â†’ æ‹†æˆå¤šå€‹å°æ­¥é©Ÿ â†’ æ¯æ­¥éƒ½å¯å›æ»¾ã€‚

---

# ğŸ“‚ å°ˆæ¡ˆæœ¨åŒ…ï¼ˆProject Structureï¼‰

```bash
crypto-market-analyzer/
â”‚
â”œâ”€â”€ collector-py/             # ç¬¬ä¸€éšæ®µï¼šPython Collector (REST ç‚ºä¸»)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ connectors/       # å„äº¤æ˜“æ‰€ / æ•¸æ“šæºé€£æ¥
â”‚   â”‚   â”‚   â”œâ”€â”€ binance_rest.py
â”‚   â”‚   â”‚   â”œâ”€â”€ coinbase_rest.py
â”‚   â”‚   â”‚   â””â”€â”€ onchain_api.py
â”‚   â”‚   â”œâ”€â”€ loaders/          # å¯«å…¥ TimescaleDB / Redis çš„é‚è¼¯
â”‚   â”‚   â”œâ”€â”€ validators/       # ç°¡å–®è³‡æ–™é©—è­‰ï¼ˆschema / typeï¼‰
â”‚   â”‚   â”œâ”€â”€ schedulers/       # APScheduler / Celery ä»»å‹™æ’ç¨‹
â”‚   â”‚   â””â”€â”€ config.py         # å…±ç”¨è¨­å®šè¼‰å…¥
â”‚   â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ data-collector/           # ç¬¬äºŒéšæ®µï¼šNode.js å¯¦æ™‚ Collector (WebSocket)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ binance_ws.ts
â”‚   â”‚   â”œâ”€â”€ coinbase_ws.ts
â”‚   â”‚   â”œâ”€â”€ orderbook_handlers/
â”‚   â”‚   â””â”€â”€ queues/           # Redis / Bull ä»»å‹™ä½‡åˆ—
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ data-analyzer/            # Pythonï¼šåˆ†æ + æ¨¡å‹ + ç­–ç•¥
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ features/
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ anomaly/
â”‚   â”‚   â”œâ”€â”€ strategies/
â”‚   â”‚   â”œâ”€â”€ backtesting/
â”‚   â”‚   â””â”€â”€ reports/
â”‚   â”œâ”€â”€ notebooks/            # EDA / Prototype
â”‚   â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ schemas/              # schema.sql / migration scripts
â”‚   â””â”€â”€ migrations/
â”‚
â”œâ”€â”€ configs/
â”‚   â”œâ”€â”€ collector/
â”‚   â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ strategies/
â”‚   â””â”€â”€ system.yml
â”‚
â”œâ”€â”€ shared/
â”‚   â”œâ”€â”€ config/               # å…±ç”¨è¨­å®šè§£æå·¥å…·
â”‚   â””â”€â”€ utils/                # å…¬ç”¨å·¥å…· (logging, time, etc.)
â”‚
â”œâ”€â”€ scripts/                  # é–‹ç™¼èˆ‡é‹ç¶­è…³æœ¬
â”‚   â”œâ”€â”€ init_db.sh
â”‚   â”œâ”€â”€ run_collector.sh
â”‚   â”œâ”€â”€ run_backtest.sh
â”‚   â””â”€â”€ verify_*.py
â”‚
â”œâ”€â”€ docker-compose.yml
â””â”€â”€ README.md
```

---

# ğŸ§¬ ä¸»ç¨‹å¼æ¶æ§‹ (Main Program Architecture)

## 1. ç³»çµ±è³‡æ–™æµæ¦‚å¿µåœ–ï¼ˆæ–‡å­—ç‰ˆï¼‰

```text
[Scheduler] 
    â†“ è§¸ç™¼ Collector Jobs
[Data Collector Agent]
    â†“ å¯«å…¥
[TimescaleDB / Redis]
    â†“ æŠ½å– (ETL)
[Data Quality & Validation Agent]
    â†“ æ¸…æ´— / æ¨™è¨˜å¾Œè³‡æ–™
[Analysis Agent]
    â†“ Signal / Feature
[Strategy & Backtest Agent]
    â†“ PnL / Metrics / Equity Curve
[Report Agent]
    â†“
HTML / PDF / Dashboard
```

---

## 2. Python æ§åˆ¶æµç¨‹ï¼ˆPseudo Main Loopï¼‰

```python
def main():
    cfg = load_system_config("configs/system.yml")
    init_logging(cfg.logging)
    db = init_database(cfg.database)
    redis_client = init_redis(cfg.redis)

    scheduler = init_scheduler(cfg.scheduler)

    # è¨»å†Š Collector ä»»å‹™
    register_collectors(scheduler, cfg.collector, db, redis_client)

    # è¨»å†Šè³‡æ–™å“è³ªä»»å‹™
    register_quality_jobs(scheduler, cfg.data_quality, db)

    # è¨»å†Šåˆ†æ / å›æ¸¬ä»»å‹™
    register_analysis_jobs(scheduler, cfg.analysis, db)
    register_backtest_jobs(scheduler, cfg.backtesting, db)

    # è¨»å†Šå ±è¡¨ä»»å‹™
    register_report_jobs(scheduler, cfg.reports, db)

    # é€²å…¥æ’ç¨‹å¾ªç’°
    scheduler.start()
```

---

## 3. åˆ†æèˆ‡å›æ¸¬å…¥å£ç¯„ä¾‹

```python
# data-analyzer/src/cli/run_analysis.py
def run_price_forecast(config_path: str):
    cfg = load_model_config(config_path)
    data = load_market_data(cfg.data)
    features = build_features(data, cfg.features)
    model = load_or_train_model(cfg.model, features)
    predictions = model.predict(features)
    save_predictions(predictions, cfg.output)

# data-analyzer/src/cli/run_backtest.py
def run_backtest(config_path: str):
    cfg = load_strategy_config(config_path)
    market_data = load_market_data(cfg.data)
    features = build_features(market_data, cfg.features)
    strategy = build_strategy(cfg.strategy, features)
    results = backtest(strategy, market_data, cfg.execution)
    save_backtest_results(results, cfg.output)
```
