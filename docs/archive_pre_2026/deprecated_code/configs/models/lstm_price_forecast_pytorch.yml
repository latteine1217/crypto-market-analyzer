# ============================================
# LSTM 價格預測模型配置（PyTorch 版本）
# ============================================

# 實驗基本資訊
experiment:
  name: lstm_btc_price_forecast_pytorch
  version: "v1.0"
  description: "使用 PyTorch LSTM 預測 BTC 價格走勢"
  random_seed: 42

# 資料配置
data:
  source:
    exchange: binance
    symbol: "BTC/USDT"
    market_id: 1  # 資料庫中的 market_id
    timeframe: "1m"
    # 時間範圍（從資料庫查詢）
    lookback_days: 30  # 使用最近 30 天的資料

  # 資料分割
  split:
    train_ratio: 0.7
    val_ratio: 0.2
    test_ratio: 0.1

# 特徵配置
features:
  # 是否使用額外特徵（如果為 false，只使用價格）
  use_features: false

  # 額外特徵列表（當 use_features=true 時使用）
  feature_columns:
    - volume
    - quote_volume
    - trade_count
    # 可在此添加更多特徵

# 模型配置
model:
  # 序列配置
  sequence_length: 60  # 使用過去 60 個時間點預測下一個時間點

  # LSTM 架構
  hidden_size: 50  # LSTM 隱藏層大小
  num_layers: 2    # LSTM 層數
  dropout: 0.2     # Dropout 比例

  # 優化器配置
  learning_rate: 0.001

  # 設備配置
  device: null  # null 自動選擇，可設為 'cpu', 'cuda', 'mps'

# 訓練配置
training:
  batch_size: 32
  epochs: 100
  val_ratio: 0.2  # 從訓練集中分出的驗證集比例

  # 早停配置
  early_stopping:
    enabled: true
    patience: 10  # 驗證損失不下降的容忍輪數

  # 訓練時是否顯示進度
  verbose: true

# 評估指標
evaluation:
  metrics:
    - mse          # 均方誤差
    - rmse         # 均方根誤差
    - mae          # 平均絕對誤差
    - r2           # R² 分數
    - mape         # 平均絕對百分比誤差
    - direction_accuracy  # 方向預測準確率

# 輸出配置
output:
  # 模型保存路徑
  model_dir: "models/saved"
  model_filename: "lstm_btc_pytorch_v1.pth"

  # 預測結果保存路徑
  results_dir: "results/lstm_btc_pytorch_v1"
  predictions_file: "predictions.csv"
  metrics_file: "metrics.json"

  # 訓練歷史
  training_history_file: "training_history.csv"

  # 圖表配置
  plots:
    enabled: true
    save_format: "png"  # png, pdf, svg
    dpi: 300
    figures:
      - actual_vs_predicted  # 實際 vs 預測值
      - training_history     # 訓練歷史
      - residuals            # 殘差分析
      - error_distribution   # 誤差分布
