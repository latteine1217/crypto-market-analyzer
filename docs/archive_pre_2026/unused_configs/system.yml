# ============================================
# 系統主配置檔案
# ============================================

# 資料庫配置
database:
  timescaledb:
    host: localhost
    port: 5432
    database: crypto_market
    user: postgres
    password: ${DB_PASSWORD}  # 從環境變數讀取
    pool_size: 10
    max_overflow: 20

  redis:
    host: localhost
    port: 6379
    db: 0
    password: ${REDIS_PASSWORD}

# 日誌配置
logging:
  level: INFO
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  output:
    console: true
    file:
      enabled: true
      path: logs/system.log
      max_bytes: 10485760  # 10MB
      backup_count: 5

# 排程器配置
scheduler:
  type: apscheduler  # 或 celery
  timezone: UTC
  job_defaults:
    coalesce: false
    max_instances: 3
    misfire_grace_time: 300

# Collector 任務配置
collector:
  enabled: true
  config_dir: configs/collector

# Data Quality 任務配置
data_quality:
  enabled: true
  check_interval: 3600  # 每小時檢查一次
  metrics:
    - missing_ratio
    - out_of_order
    - price_jump
    - volume_spike

# Analysis 任務配置
analysis:
  enabled: true
  config_dir: configs/models

# Backtesting 任務配置
backtesting:
  enabled: true
  config_dir: configs/strategies
  results_dir: results

# Report 任務配置
reports:
  enabled: true
  output_dir: reports
  formats:
    - html
    - pdf
  schedule:
    daily: "0 1 * * *"    # 每天 01:00
    weekly: "0 2 * * 0"   # 每週日 02:00
    monthly: "0 3 1 * *"  # 每月 1 號 03:00
