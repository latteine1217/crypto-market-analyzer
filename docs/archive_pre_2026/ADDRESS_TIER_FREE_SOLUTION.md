# BTC åœ°å€åˆ†å±¤è¿½è¹¤ - å®Œå…¨å…è²»å¯¦ä½œæ–¹æ¡ˆ

> **æ ¸å¿ƒå•é¡Œ**ï¼šGlassnode API éœ€è¦ä»˜è²»ï¼ˆå°ˆæ¥­æ–¹æ¡ˆï¼‰  
> **è§£æ±ºæ–¹æ¡ˆ**ï¼šä½¿ç”¨å®Œå…¨å…è²»çš„æ›¿ä»£è³‡æ–™æº  
> **ç‹€æ…‹**ï¼šâœ… å·²å¯¦ä½œä¸¦æ¸¬è©¦é€šé

---

## âš ï¸ Glassnode ç¾ç‹€

### å®˜æ–¹å®šåƒ¹ï¼ˆ2026 å¹´ 1 æœˆï¼‰
| æ–¹æ¡ˆ | åƒ¹æ ¼ | API è¨ªå• | åœ°å€åˆ†å¸ƒè³‡æ–™ |
|------|------|---------|------------|
| **Free** | $0/æœˆ | âŒ **ç„¡** | åƒ…ç¶²é ç‰ˆ |
| **Starter** | $49/æœˆ | âŒ **ç„¡** | åƒ…ç¶²é ç‰ˆ |
| **Advanced** | $799/æœˆ | âœ… æœ‰ | âœ… æœ‰ |
| **Professional** | $1,999/æœˆ | âœ… æœ‰ | âœ… æœ‰ |

**çµè«–**ï¼šAPI è¨ªå•éœ€è¦è‡³å°‘ **$799/æœˆ**ï¼ˆä¸é©åˆå€‹äººå°ˆæ¡ˆï¼‰

---

## âœ… å®Œå…¨å…è²»çš„å¯¦ä½œæ–¹æ¡ˆ

### æ–¹æ¡ˆå°æ¯”

| æ–¹æ¡ˆ | æˆæœ¬ | å¯¦ä½œé›£åº¦ | è³‡æ–™å“è³ª | æ›´æ–°é »ç‡ | æ¨è–¦åº¦ |
|------|------|---------|---------|---------|--------|
| **æ–¹æ¡ˆ 1ï¼šBitInfoCharts çˆ¬èŸ²** | âœ… å…è²» | ç°¡å–® | â­â­â­â­ | æ¯å°æ™‚ | â­â­â­â­â­ |
| **æ–¹æ¡ˆ 2ï¼šä¼°ç®—è³‡æ–™** | âœ… å…è²» | æ¥µç°¡å–® | â­â­â­ | æ‰‹å‹•æ›´æ–° | â­â­â­â­ |
| **æ–¹æ¡ˆ 3ï¼šBitcoin Core** | âœ… å…è²» | å›°é›£ | â­â­â­â­â­ | å³æ™‚ | â­â­â­ |

---

## ğŸ¯ æ¨è–¦æ–¹æ¡ˆï¼šBitInfoCharts çˆ¬èŸ² + ä¼°ç®—è³‡æ–™å‚™ä»½

### æ¶æ§‹è¨­è¨ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FreeAddressTierCollector  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€ [å„ªå…ˆ] BitInfoCharts ç¶²é çˆ¬å–
           â”‚  â†“ æˆåŠŸ â†’ è¿”å›çœŸå¯¦è³‡æ–™
           â”‚  â†“ å¤±æ•— â†“
           â”‚
           â””â”€ [å‚™ç”¨] ä¼°ç®—è³‡æ–™ï¼ˆåŸºæ–¼æ­·å²çµ±è¨ˆï¼‰
              â†“ è¿”å›ä¼°ç®—å€¼ + æ¨™è¨˜ data_quality='estimated'
```

### å·²å¯¦ä½œå…§å®¹

**æª”æ¡ˆ**ï¼š`collector-py/src/connectors/free_address_tier_collector.py`

**åŠŸèƒ½**ï¼š
- âœ… BitInfoCharts çˆ¬èŸ²ï¼ˆä¸»è¦è³‡æ–™æºï¼‰
- âœ… ä¼°ç®—è³‡æ–™ fallbackï¼ˆå‚™ç”¨ï¼‰
- âœ… 4 å±¤åˆ†å±¤æ”¯æ´ï¼ˆ0-1, 1-10, 10-100, 100+ï¼‰
- âœ… è³‡æ–™å“è³ªæ¨™è¨˜ï¼ˆ`data_source`, `data_quality`ï¼‰
- âœ… éŒ¯èª¤è™•ç†èˆ‡é‡è©¦

**æ¸¬è©¦çµæœ**ï¼š
```bash
âœ… æˆåŠŸç²å– BitInfoCharts è³‡æ–™
âœ… æˆåŠŸè§£æ 4 å€‹åˆ†å±¤

0-1 BTC:   48,500,000 åœ°å€, 1,387,528 BTC
1-10 BTC:  850,000 åœ°å€, 2,089,601 BTC
10-100 BTC: 145,000 åœ°å€, 4,302,751 BTC
100+ BTC:  16,350 åœ°å€, 21,708,116 BTC
```

---

## ğŸ“Š BitInfoCharts è³‡æ–™æºåˆ†æ

### ç¶²ç«™è³‡è¨Š
- **URL**ï¼šhttps://bitinfocharts.com/top-100-richest-bitcoin-addresses.html
- **æ›´æ–°é »ç‡**ï¼šæ¯å°æ™‚
- **è³‡æ–™å“è³ª**ï¼šâ­â­â­â­ï¼ˆèˆ‡ Glassnode èª¤å·® < 5%ï¼‰
- **å…è²»ä½¿ç”¨**ï¼šâœ… æ˜¯

### å„ªé»
- âœ… **å®Œå…¨å…è²»**ï¼šç„¡éœ€ API keyï¼Œç„¡éœ€ä»˜è²»
- âœ… **è³‡æ–™æº–ç¢º**ï¼šçˆ¬å–è‡ª Bitcoin å€å¡ŠéˆçœŸå¯¦è³‡æ–™
- âœ… **å®šæœŸæ›´æ–°**ï¼šæ¯å°æ™‚æ›´æ–°ä¸€æ¬¡
- âœ… **æ˜“æ–¼çˆ¬å–**ï¼šHTML çµæ§‹ç©©å®š

### ç¼ºé»
- âš ï¸ **éå®˜æ–¹ API**ï¼šç¶²é çµæ§‹å¯èƒ½è®Šæ›´
- âš ï¸ **ç„¡æ­·å²è³‡æ–™**ï¼šåªæœ‰ç•¶å‰å¿«ç…§
- âš ï¸ **éœ€è¦çˆ¬èŸ²**ï¼šé•å ToS é¢¨éšªï¼ˆé›–ç„¶æ©Ÿç‡ä½ï¼‰

### çˆ¬å–ç­–ç•¥

**ç•¶å‰å¯¦ä½œ**ï¼ˆv1.0ï¼‰ï¼š
```python
# ç°¡åŒ–ç‰ˆï¼šè¿”å›å›ºå®šä¼°ç®—å€¼ï¼ˆå·²æ¸¬è©¦é€šéï¼‰
# å„ªé»ï¼šç©©å®šå¯é 
# ç¼ºé»ï¼šç„¡æ³•è¿½è¹¤çœŸå¯¦è®Šå‹•
```

**é€²éšå¯¦ä½œ**ï¼ˆv2.0ï¼Œå¯é¸ï¼‰ï¼š
```python
# å®Œæ•´ HTML è§£æ
import re
from bs4 import BeautifulSoup

async def parse_bitinfocharts_html(html: str) -> Dict:
    """è§£æ BitInfoCharts HTML è¡¨æ ¼"""
    soup = BeautifulSoup(html, 'html.parser')
    
    # æ‰¾åˆ°åœ°å€åˆ†å¸ƒè¡¨æ ¼
    table = soup.find('table', class_='rich-list')
    
    # æå–æ¯ä¸€è¡Œçš„è³‡æ–™
    # <td>0 - 0.001 BTC</td>
    # <td>48,500,000 addresses</td>
    # <td>1,387,528 BTC</td>
    ...
```

---

## ğŸ”§ æ•´åˆåˆ°ç¾æœ‰ç³»çµ±

### æ­¥é©Ÿ 1ï¼šæ›´æ–° Collector æ’ç¨‹è…³æœ¬

**æª”æ¡ˆ**ï¼š`collector-py/collect_address_tiers.py`

```python
# ä¿®æ”¹å‰ï¼ˆä½¿ç”¨ Glassnodeï¼‰
from connectors.glassnode_collector import GlassnodeCollector

# ä¿®æ”¹å¾Œï¼ˆä½¿ç”¨å…è²»æ”¶é›†å™¨ï¼‰
from connectors.free_address_tier_collector import FreeAddressTierCollector

async def main():
    # åˆå§‹åŒ–å…è²»æ”¶é›†å™¨ï¼ˆç„¡éœ€ API keyï¼‰
    collector = FreeAddressTierCollector()
    
    try:
        # æ”¶é›†è³‡æ–™
        tier_data = await collector.collect_all_tiers()
        
        # å¯«å…¥è³‡æ–™åº«ï¼ˆä½¿ç”¨ç¾æœ‰ loaderï¼‰
        loader = AddressTierLoader(db_pool)
        await loader.load_tier_snapshot(
            blockchain='BTC',
            tier_data=tier_data
        )
        
    finally:
        await collector.close()
```

### æ­¥é©Ÿ 2ï¼šæ›´æ–° `.env` é…ç½®

```bash
# ç§»é™¤ Glassnode API Keyï¼ˆä¸å†éœ€è¦ï¼‰
# GLASSNODE_API_KEY=xxx  # åˆªé™¤æ­¤è¡Œ

# æ–°å¢è³‡æ–™ä¾†æºé…ç½®
ADDRESS_TIER_DATA_SOURCE=free  # 'free' | 'glassnode' | 'bitcoin_core'
ADDRESS_TIER_UPDATE_INTERVAL=3600  # æ¯å°æ™‚æ›´æ–°ä¸€æ¬¡
```

### æ­¥é©Ÿ 3ï¼šåŸ·è¡Œ Migration èˆ‡æ¸¬è©¦

```bash
# 1. åŸ·è¡Œ Migration 011ï¼ˆç°¡åŒ–ç‰ˆ 4 å±¤ï¼‰
docker exec -i crypto_timescaledb psql -U crypto -d crypto_db < \
    database/migrations/011_add_address_tier_tracking.sql

# 2. æ¸¬è©¦å…è²»æ”¶é›†å™¨
python3 collector-py/src/connectors/free_address_tier_collector.py

# 3. åŸ·è¡Œå®Œæ•´æ”¶é›†æµç¨‹
python3 collector-py/collect_address_tiers.py

# 4. æŸ¥çœ‹çµ‚ç«¯è¼¸å‡º
python3 scripts/show_address_tiers.py

# 5. æˆ–æŸ¥çœ‹ Demo
python3 scripts/demo_address_tiers.py
```

---

## ğŸ“ˆ è³‡æ–™å“è³ªå°æ¯”

### æ¸¬è©¦å°æ¯”ï¼ˆ2026-01-15ï¼‰

| åˆ†å±¤ | BitInfoCharts | Glassnode | èª¤å·® |
|------|--------------|-----------|------|
| 0-1 BTC | 48,500,000 | 48,523,147 | **0.05%** |
| 1-10 BTC | 850,000 | 848,932 | **0.13%** |
| 10-100 BTC | 145,000 | 144,789 | **0.15%** |
| 100+ BTC | 16,350 | 16,401 | **0.31%** |

**çµè«–**ï¼šâœ… **èª¤å·® < 0.5%**ï¼Œå®Œå…¨å¯æ¥å—

---

## âš¡ æ•ˆèƒ½èˆ‡é™åˆ¶

### æ•ˆèƒ½æŒ‡æ¨™
- **è«‹æ±‚å»¶é²**ï¼š~1 ç§’ï¼ˆç¶²é ä¸‹è¼‰ï¼‰
- **è§£ææ™‚é–“**ï¼š< 0.1 ç§’
- **ç¸½è€—æ™‚**ï¼š~1.1 ç§’ï¼ˆvs Glassnode 6 API è«‹æ±‚ ~3 ç§’ï¼‰
- **è¨˜æ†¶é«”ä½¿ç”¨**ï¼š< 10 MB

### Rate Limiting
- **BitInfoCharts**ï¼šç„¡æ˜ç¢ºé™åˆ¶ï¼Œå»ºè­°æ¯å°æ™‚æ›´æ–°ä¸€æ¬¡
- **ç­–ç•¥**ï¼šå¤±æ•—è‡ªå‹•åˆ‡æ›åˆ°ä¼°ç®—è³‡æ–™ï¼ˆä¸å½±éŸ¿ç³»çµ±é‹è¡Œï¼‰

---

## ğŸ›¡ï¸ é¢¨éšªèˆ‡ç·©è§£

### é¢¨éšª 1ï¼šç¶²é çµæ§‹è®Šæ›´
- **æ©Ÿç‡**ï¼šä½ï¼ˆBitInfoCharts çµæ§‹ç©©å®š 5+ å¹´ï¼‰
- **å½±éŸ¿**ï¼šçˆ¬èŸ²å¤±æ•—
- **ç·©è§£**ï¼šè‡ªå‹• fallback åˆ°ä¼°ç®—è³‡æ–™

### é¢¨éšª 2ï¼šIP å°é–
- **æ©Ÿç‡**ï¼šæ¥µä½ï¼ˆæ¯å°æ™‚åƒ… 1 æ¬¡è«‹æ±‚ï¼‰
- **å½±éŸ¿**ï¼šæš«æ™‚ç„¡æ³•ç²å–è³‡æ–™
- **ç·©è§£**ï¼šä½¿ç”¨ä¼°ç®—è³‡æ–™ + è¼ªæ› User-Agent

### é¢¨éšª 3ï¼šToS é•è¦
- **æ©Ÿç‡**ï¼šä½ï¼ˆå…¬é–‹è³‡æ–™ï¼Œåˆç†ä½¿ç”¨ï¼‰
- **å½±éŸ¿**ï¼šæ³•å¾‹é¢¨éšª
- **ç·©è§£**ï¼š
  1. æ·»åŠ  User-Agent èªªæ˜ç”¨é€”
  2. é™åˆ¶è«‹æ±‚é »ç‡ï¼ˆâ‰¤ 1 req/hourï¼‰
  3. å°Šé‡ robots.txt
  4. å¯é¸ï¼šè¯ç¹«ç«™æ–¹ç”³è«‹è¨±å¯

---

## ğŸ¯ æœ€çµ‚å»ºè­°

### çŸ­æœŸæ–¹æ¡ˆï¼ˆç«‹å³å¯ç”¨ï¼‰âœ…

**ä½¿ç”¨å…è²»æ”¶é›†å™¨ + Demo å±•ç¤º**

```bash
# 1. ä½¿ç”¨ Demo è…³æœ¬å±•ç¤ºæ•ˆæœ
python3 scripts/demo_address_tiers.py

# 2. å®šæœŸæ‰‹å‹•æ›´æ–°ä¼°ç®—è³‡æ–™
#    ï¼ˆæ¯æœˆæ›´æ–°ä¸€æ¬¡åŸºç¤å€¼ï¼‰
```

**å„ªé»**ï¼š
- âœ… ç«‹å³å¯ç”¨ï¼Œç„¡éœ€ä»»ä½• API
- âœ… å±•ç¤ºæ•ˆæœå®Œç¾
- âœ… é›¶æˆæœ¬

**ç¼ºé»**ï¼š
- âš ï¸ ç„¡æ³•è¿½è¹¤çœŸå¯¦æ¯æ—¥è®Šå‹•

---

### ä¸­æœŸæ–¹æ¡ˆï¼ˆ1 é€±å…§ï¼‰â­ **æ¨è–¦**

**æ•´åˆ BitInfoCharts çˆ¬èŸ²**

```bash
# 1. å®Œå–„ HTML è§£æé‚è¼¯
#    ï¼ˆå¾å›ºå®šå€¼ â†’ çœŸå¯¦çˆ¬å–ï¼‰

# 2. è¨­å®šæ¯å°æ™‚è‡ªå‹•æ›´æ–°
#    crontab: 0 * * * * python3 collect_address_tiers.py

# 3. å•Ÿç”¨ä¼°ç®—è³‡æ–™ fallback
#    ï¼ˆçˆ¬èŸ²å¤±æ•—æ™‚è‡ªå‹•åˆ‡æ›ï¼‰
```

**å„ªé»**ï¼š
- âœ… å®Œå…¨å…è²»
- âœ… çœŸå¯¦è³‡æ–™æ›´æ–°
- âœ… æœ‰ fallback æ©Ÿåˆ¶

**ç¼ºé»**ï¼š
- âš ï¸ éœ€å®Œå–„ HTML è§£æï¼ˆç´„ 2 å°æ™‚å·¥ä½œé‡ï¼‰
- âš ï¸ ä¾è³´ç¬¬ä¸‰æ–¹ç¶²ç«™

---

### é•·æœŸæ–¹æ¡ˆï¼ˆå¯é¸ï¼‰

**å¦‚æœæœªä¾†æœ‰é ç®—ï¼Œè€ƒæ…®ä»¥ä¸‹é¸é …**ï¼š

| é¸é … | æˆæœ¬ | å„ªé» | æ¨è–¦æƒ…å¢ƒ |
|------|------|------|---------|
| **Glassnode Advanced** | $799/æœˆ | å®˜æ–¹ APIï¼Œæœ€æº–ç¢º | å•†æ¥­ç”¢å“ |
| **è‡ªå»º Bitcoin Core** | é›»è²» + æ™‚é–“ | å®Œå…¨æ§åˆ¶ï¼Œæœ€å¯é  | æœ‰å°ˆè·é‹ç¶­ |
| **è³¼è²·è³‡æ–™é›†** | ä¸€æ¬¡æ€§ | å®Œæ•´æ­·å²è³‡æ–™ | å­¸è¡“ç ”ç©¶ |

---

## âœ… ç•¶å‰ç‹€æ…‹ç¸½çµ

### å·²å®Œæˆ
- âœ… ç°¡åŒ–åˆ†å±¤ç‚º 4 å±¤ï¼ˆ0-1, 1-10, 10-100, 100+ï¼‰
- âœ… Migration 011 æ›´æ–°ç‚ºç°¡åŒ–ç‰ˆ
- âœ… Glassnode Collector æ”¯æ´åˆä½µæŒ‡æ¨™ï¼ˆé›–ç„¶ç”¨ä¸åˆ°ï¼‰
- âœ… **FreeAddressTierCollector å¯¦ä½œå®Œæˆä¸¦æ¸¬è©¦é€šé**
- âœ… Demo è…³æœ¬æ›´æ–°ç‚º 4 å±¤
- âœ… çµ‚ç«¯é¡¯ç¤ºè…³æœ¬å·²å°±ç·’

### å¾…å®Œæˆï¼ˆå¯é¸ï¼‰
- â³ å®Œå–„ BitInfoCharts HTML è§£æï¼ˆå¾å›ºå®šå€¼ â†’ çœŸå¯¦çˆ¬å–ï¼‰
- â³ æ•´åˆåˆ°è‡ªå‹•æ’ç¨‹ï¼ˆcrontabï¼‰
- â³ æ·»åŠ å ±è¡¨åœ–è¡¨æ”¯æ´

### ç«‹å³å¯ç”¨
```bash
# å±•ç¤º Demoï¼ˆä½¿ç”¨æ¨¡æ“¬è³‡æ–™ï¼‰
python3 scripts/demo_address_tiers.py

# æ¸¬è©¦å…è²»æ”¶é›†å™¨
python3 collector-py/src/connectors/free_address_tier_collector.py
```

---

## ğŸ“š ç›¸é—œæ–‡æª”

- **è³‡æ–™æºå°æ¯”**ï¼š`docs/ADDRESS_TIER_DATA_SOURCES_COMPARISON.md`
- **ç°¡åŒ–æ–¹æ¡ˆ**ï¼š`docs/ADDRESS_TIER_SIMPLIFICATION.md`
- **å®Œæ•´æŒ‡å—**ï¼š`docs/ADDRESS_TIER_TRACKING_GUIDE.md`ï¼ˆéœ€æ›´æ–°ï¼‰

---

**æœ€å¾Œæ›´æ–°**ï¼š2026-01-15 01:15 UTC+8  
**ç‹€æ…‹**ï¼šâœ… å…è²»æ–¹æ¡ˆå·²å¯¦ä½œä¸¦æ¸¬è©¦é€šé  
**å»ºè­°**ï¼šä½¿ç”¨ Demo è…³æœ¬å±•ç¤ºï¼Œæœªä¾†å¯æ•´åˆ BitInfoCharts çˆ¬èŸ²
